# aurum チュートリアル

このチュートリアルでは、aurumプロジェクトの基本的な使い方を、実際の作業フローに沿って説明します。

---

## 目次

1. [初期セットアップ](#1-初期セットアップ)
2. [投資プロフィールの作成](#2-投資プロフィールの作成)
3. [3エージェント評価の実行](#3-3エージェント評価の実行)
4. [モンテカルロシミュレーションの実行](#4-モンテカルロシミュレーションの実行)
5. [レポート生成](#5-レポート生成)

---

## 1. 初期セットアップ

### 1.1 リポジトリのクローン

```bash
git clone https://github.com/[YOUR_USERNAME]/aurum-public.git
cd aurum-public
```

### 1.2 Python環境のセットアップ

```bash
# 仮想環境作成（推奨）
python -m venv venv
source venv/bin/activate  # Windows: venv\Scripts\activate

# 依存関係インストール
pip install -r requirements.txt
```

### 1.3 テンプレートのコピー

```bash
# 必須ファイル
cp python/config/personal.template.py python/config/personal.py
cp INVESTMENT_PROFILE.template.md INVESTMENT_PROFILE.md

# 推奨ファイル（詳細な管理をする場合）
cp sources/profile/templates/asset_details.template.md sources/profile/asset_details.md
cp sources/profile/templates/investment_history.template.md sources/profile/investment_history.md
cp document/PERSONAL_DATA.template.md document/PERSONAL_DATA.md
```

---

## 2. 投資プロフィールの作成

### 2.1 基本情報の入力

`INVESTMENT_PROFILE.md` を開いて、プレースホルダーを実際の値に置き換えます。

**例**:

```markdown
## 基本情報

- **年齢**: 35歳
- **年収**: 600万円（税引後450万円）
- **家族構成**: 独身
- **職業**: ITエンジニア
- **居住地**: 東京都
```

### 2.2 資産状況の入力

**総資産の記入**:

```markdown
## 資産状況

### 総資産: 800万円

| カテゴリ | 金額 | 割合 |
|---------|------|------|
| NISA（成長投資枠） | 500万円 | 62.5% |
| iDeCo | 100万円 | 12.5% |
| 現金・預金 | 200万円 | 25.0% |
```

### 2.3 投資目標の設定

**例: 老後資金目標**

```markdown
## 投資目標

### 目標1: 老後資金（2058年、65歳）
- **目標金額**: 3,000万円
- **現在の進捗**: 600万円（20%）
- **月次積立額**: 5万円
- **想定利回り**: 年5%
```

---

## 3. 3エージェント評価の実行

3エージェント評価は、重要な投資判断を複数の視点から分析します。

### 3.1 評価対象の決定

評価対象となる銘柄や戦略を決定します。

**例: 新規投資先の検討**

```
検討中の投資先: S&P500インデックスファンド（eMAXIS Slim米国株式）
投資額: 100万円
```

### 3.2 エージェント評価の実行

3つの視点で評価を実施します：

#### (A) データ駆動エージェント（分析型）

**評価基準**:
- 過去のリターンデータ
- 手数料・経費率
- 分散効果

**評価シート**:

```markdown
### データ駆動エージェント評価

**総合スコア**: 85/100

**詳細評価**:
- リターン実績（過去10年平均12%）: 90/100
- 手数料（0.09372%）: 95/100
- 分散効果（500銘柄）: 85/100
- 流動性: 80/100

**推奨度**: 強く推奨（投資額100万円は適切）
```

#### (B) リスク管理エージェント（慎重型）

**評価基準**:
- 最大ドローダウン
- 市場リスク
- 集中リスク

**評価シート**:

```markdown
### リスク管理エージェント評価

**総合スコア**: 70/100

**詳細評価**:
- 最大ドローダウン（-34%, 2008年）: 60/100
- 市場リスク（S&P500連動）: 70/100
- 集中リスク（米国市場のみ）: 65/100
- 為替リスク（円安進行）: 75/100

**推奨度**: 条件付き推奨（全資産の50%以下に抑えるべき）
```

#### (C) 人間中心エージェント（行動経済学型）

**評価基準**:
- 心理的負担
- 継続可能性
- INVESTMENT_PROFILE.mdの原則との整合性

**評価シート**:

```markdown
### 人間中心エージェント評価

**総合スコア**: 75/100

**詳細評価**:
- 心理的負担（ボラティリティ許容度）: 70/100
- 継続可能性（長期保有の意志）: 85/100
- 原則との整合性（国際分散原則に反する）: 65/100
- FOMO/不安駆動の可能性: 75/100

**推奨度**: 条件付き推奨（国際分散ファンドとの併用を推奨）
```

### 3.3 統合評価の作成

3エージェントの評価を統合します。

**標準ウェイト**: (A) 40%, (B) 30%, (C) 30%

```
統合スコア = 85 × 0.40 + 70 × 0.30 + 75 × 0.30
           = 34 + 21 + 22.5
           = 77.5/100
```

**最終判断**:

```markdown
### 統合評価

**統合スコア**: 77.5/100

**結論**: 条件付き推奨

**理由**:
1. データ駆動評価は高評価（85点）
2. リスク管理評価は慎重（70点）- 米国集中リスクを懸念
3. 人間中心評価は中程度（75点）- 国際分散原則との不整合

**推奨アクション**:
- 投資額を50万円に減額（全資産の6.25%）
- 残り50万円は国際分散ファンド（全世界株式）に投資
- 市場下落時の心理的負担を定期的にモニタリング
```

### 3.4 INVESTMENT_PROFILE.mdへの記録

評価結果を記録します。

```markdown
### 評価履歴

#### 2024年11月11日: S&P500インデックスファンド評価

**評価スコア**:
- (A) データ駆動: 85/100
- (B) リスク管理: 70/100
- (C) 人間中心: 75/100
- **統合スコア**: 77.5/100（標準ウェイト）

**判断**: 条件付き推奨（投資額50万円、残り50万円は全世界株式）

**実施結果**: 2024年11月15日 50万円投資実行
```

---

## 4. モンテカルロシミュレーションの実行

モンテカルロシミュレーションで、将来の資産推移を確率的に予測します。

### 4.1 シミュレーションパラメータの設定

`python/config/personal.py` でパラメータを設定します（オプション）。

```python
# モンテカルロシミュレーション設定
MONTE_CARLO_SIMULATIONS = 10000  # シミュレーション回数
EXPECTED_RETURN = 0.05  # 期待リターン（年5%）
VOLATILITY = 0.15  # ボラティリティ（年15%）
```

### 4.2 シミュレーションの実行

```bash
# UTF-8エンコーディングでPythonスクリプトを実行
PYTHONUTF8=1 python python/controllers/investment_analysis.py
```

### 4.3 結果の解釈

シミュレーション結果は以下のように表示されます：

```
=== モンテカルロシミュレーション結果 ===

初期資産: 800万円
目標金額: 3,000万円
期間: 30年

結果統計:
- 50パーセンタイル（中央値）: 3,200万円
- 25パーセンタイル: 2,400万円
- 75パーセンタイル: 4,100万円
- 10パーセンタイル: 1,800万円
- 90パーセンタイル: 5,500万円

目標達成確率: 62%
```

**解釈**:
- 62%の確率で目標（3,000万円）を達成
- 最悪ケース（10パーセンタイル）でも1,800万円確保
- 最良ケース（90パーセンタイル）では5,500万円到達

---

## 5. レポート生成

### 5.1 Pythonスクリプトでのレポート生成

```bash
# 投資判断レポート生成
PYTHONUTF8=1 python python/controllers/investment_analysis.py
```

### 5.2 レポートの保存場所

生成されたレポートは以下に保存されます：

```
outputs/reports/working/yyyymm/yyyymmdd_テーマ/
```

**例**:
```
outputs/reports/working/202411/20241111_S&P500評価/
├── evaluation_summary.md
├── monte_carlo_results.png
└── risk_analysis.md
```

### 5.3 成果物の確認

レポートをレビューし、問題がなければ `completed/` に移動します：

```bash
mv outputs/reports/working/202411/20241111_S&P500評価 \
   outputs/reports/completed/202411/
```

---

## 次のステップ

### より高度な使い方

1. **カスタムエージェントの追加** - `.claude/agents/` にカスタムエージェントを定義
2. **ウェイト調整** - 特定の状況でエージェントウェイトを調整（詳細は `.claude/06c_weight_adjustment_rules.md` を参照）
3. **ベースライン評価** - 学習目的での評価記録（詳細は `.claude/09_baseline_evaluation.md` を参照）

### コミュニティ

- GitHub Issues: バグ報告・機能リクエスト
- GitHub Discussions: 質問・議論

---

**最終更新**: 2025年11月11日
